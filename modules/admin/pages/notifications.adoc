= Настройка уведомлений

В приложении _{dm}_ предусмотрена возможность отправки ряда уведомлений по электронной почте. Отправка сообщений осуществляется бизнес-процессами (список БП приведен в пункте xref:ROOT:business-processes.adoc[Бизнес-процессы]).

[NOTE]
====
Механизма обновления бизнес-процесса отправки уведомлений не предусмотрено. При необходимости модификации рекомендуется разработать собственный бизнес-процесс на основе поставляемого.
====

.В приложении могут быть настроены следующие уведомления:
* xref:notifications/acceptance-start.adoc[Уведомление о начале приемки задания].
* xref:notifications/rejected-author.adoc[Уведомление Автора об отклонении задания].
* xref:notifications/completion-author.adoc[Уведомление Автора о завершении задания].
* xref:notifications/completion-group-author.adoc[Уведомление Автора о завершении группы заданий].

.Отправка уведомлений доступна после выполнения ряда настроек:
. В разделе _{wf}_ программы _{cns}_ должны быть настроены параметры отправки электронной почты (см. раздел "Настройка почты" в руководстве администратора модуля {wf}).
. БП "ПК Мониторинг почты" должен быть запущен (см. раздел "Запуск БП "ПК Мониторинг почты" в руководстве администратора модуля {wf}).
. В _Справочнике сотрудников_ у сотрудника должен быть указан _E-mail_ (адрес электронной почты, на который будут отправляться уведомления).
. Должны быть настроены форматы ссылок для открытия заданий в {wincl}е и, если требуется, {wc}е. Подробнее см. раздел xref:backoffice:desdirs:staff/employees/main-tab.adoc#routing["Настройка общих параметров маршрутизации"] в документации модуля {bo}.

== Настройка шаблона уведомлений

Администратор может настроить требуемым образом шаблон для оповещений, отправляемых по электронной почте.

Шаблон настраивается с помощью XSLT преобразования. Исходный текст стандартного преобразования доступен по ссылке, приведенной в xref:xslt-mail-notification.adoc[Приложении B].

.Чтобы настроить собственный шаблон уведомления:
. Откройте _Справочник видов карточек_.
. Выберите тип карточек *_Задание_* и вид задания, настройки которого нужно изменить.
. Перейдите на вкладку _Настройки почтовых уведомлений_.
+
.Вкладка "Настройки почтовых уведомлений"
image::main-notifications-settings.png[Вкладка "Настройки почтовых уведомлений"]

[start=4]
.Измените стандартный шаблон почтовых уведомлений:
. Нажмите кнопку image:buttons/three-dots.png[Три точки] в поле _Дополнительные почтовые уведомления_. Будет открыт редактор кода.
. Измените XSLT код и нажмите кнопку *ОК*.
+
Если код XSLT-преобразования отсутствует, используется стандартный шаблон.
+
. Установите флаг `*Отображать связанный документ в письме*`, чтобы в оповещения добавлялись атрибуты связанного с заданием документа.
+
Настройка шаблона для блока с информацией о документе, рассмотрена в документации по администрированию модуля {bo}: xref:backoffice:admin:routing-attributes.adoc["Настройка отображения атрибутов документа в письме с заданием"].
. Сохраните изменения в Справочнике видов карточек.
