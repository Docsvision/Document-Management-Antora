= Настройка уведомлений

В приложении _{dm}_ предусмотрена возможность отправки ряда уведомлений по электронной почте. Отправка сообщений осуществляется бизнес-процессами (список БП приведен в пункте xref:ROOT:business-processes.adoc[Бизнес-процессы]).

[NOTE]
====
Механизма обновления бизнес-процесса отправки уведомлений не предусмотрено. При необходимости модификации рекомендуется разработать собственный бизнес-процесс на основе поставляемого.
====

В приложении могут быть настроены следующие уведомления:

* xref:task_Notifications_members_start_acceptance.adoc[уведомление о начале приемки задания];
* xref:task_Notifications_author_reject.adoc[уведомление Автора об отклонении задания];
* xref:task_Notifications_author_finish.adoc[уведомление Автора о завершении задания];
* xref:task_Notifications_author_grtask_finish.adoc[уведомление Автора о завершении группы заданий].

Отправка уведомлений доступна после выполнения ряда настроек:

. В разделе *{wf}* программы _Консоль настройки Docsvision_ должны быть настроены параметры отправки электронной почты (см. раздел "Настройка почты" в документе _Модуль "{dv} 5. {wf}". Руководство администратора_#).
. БП "ПК Мониторинг почты" должен быть запущен (см. раздел "Запуск БП "ПК Мониторинг почты"" в документе _Модуль "{dv} 5. {bo}". Руководство администратора_#);
. В _Справочнике сотрудников_ у сотрудника должен быть указан *E-mail* (указан адрес электронной почты, на который будут отправляться уведомления);
. Должны быть настроены форматы ссылок для открытия заданий в {wincl}е и, если требуется, Web-клиенте (см. раздел "Настройка общих параметров маршрутизации" в документе _Модуль "{dv} 5. {bo}". Руководство администратора_#).

== Настройка шаблона уведомлений

Администратор может настроить требуемым образом шаблон для оповещений, отправляемых по электронной почте.

Шаблон настраивается с помощью XSLT преобразования. Исходный текст стандартного преобразования доступен по ссылке, приведенной в xref:XsltTemplate_forauthor.adoc[Приложение B. XSLT-преобразование и описание исходных данных для дополнительного почтового уведомления].

Чтобы настроить собственный шаблон уведомления, выполните следующие действия:

. Откройте _Справочник видов карточек_.
. Выберите тип карточек "Задание" и вид задания, настройки которого нужно изменить.
. Перейдите на вкладку *Настройки почтовых уведомлений*.
+
image::taskMailTemplate.png[[.fig--title-label]##Рис. 1. ##Вкладка "Настройки почтовых уведомлений"]
. Чтобы изменить стандартный шаблон почтовых уведомлений:
[loweralpha]
.. Нажмите кнопку image:buttons/cSub_treedots.png[image] в поле *Дополнительные почтовые уведомления*. Будет открыт редактор кода.
.. Измените XSLT код и нажмите кнопку *ОК*.
+
Если код XSLT-преобразования отсутствует, используется стандартный шаблон.
. Установите флаг *Отображать связанный документ в письме*, чтобы в оповещения добавлялись атрибуты связанного с заданием документа. Настройка шаблона для блока с информацией о документа, рассмотрена в документе _Модуль "{dv} 5. {bo}". Руководство администратора_#, пункт "Настройка отображения атрибутов документа в письме с заданием".
. Сохраните изменения в Справочнике видов карточек.
