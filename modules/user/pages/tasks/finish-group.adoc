= Завершение группы заданий

В приложении _{dm}_ возможны различные варианты завершения группы заданий. При смене состояния карточки _Автору_ и _Исполнителям_, При необходимости могут отправляться уведомления, содержание которых соответствует выбранному варианту завершения.

[#by-performer]
== Завершение экземпляра группы заданий исполнителем

Для завершения работы с экземпляром карточки _Группа заданий_ _Исполнителю_ необходимо завершить задание. По умолчанию для вида _Группа заданий УД_ экземпляром является задание вида _На исполнение_. Для исполнителя работа с экземпляром группы заданий не отличается от xref:tasks/receive.adoc[работы] с обычным заданием.

.Чтобы завершить задание:
. Откройте карточку _Задание УД_.
+
Понять, что задание групповое, исполнитель может в карточке _Задание УД_, на вкладке _Дополнения_ в таблице _Связанные карточки_.
+
. Нажмите кнопку *Завершить* на ленте инструментов карточки _Задание УД_.
+
Карточка задания будет закрыта.

Дальнейшие действия зависят от типа маршрутизации карточки _Группа заданий УД_, а также назначенных для группы заданий _Ответственного исполнителя_ и _Контролёра_.

.В случае использования параллельного способа маршрутизации:
* Если данный исполнитель не назначен _Ответственным исполнителем_:
** При отсутствии назначенного _Контролёра_ задание будет завершено.
** При наличии назначенного _Контролёра_ задание будет доступно в папке _Я -- контролёр_ указанного _Контролёра_. К контролёру поступят задания от всех исполнителей.
* Если данный исполнитель является _Ответственным исполнителем_ и назначен _Контролёр_, на приёмку Контролёру поступит только задание _Ответственного исполнителя_. Это задание будет доступно в папке menu:Мои задания[Входящие > На контроле]. Задания остальных исполнителей на приёмку после завершения не переходят.

.В случае использования последовательного способа маршрутизации дополнительно к описанному выше:
* Если данный исполнитель не последний в очереди, у текущего исполнителя задание будет завершено и доступно в папке menu:Мои задания[Входящие > Завершено]. +
У следующего по очереди исполнителя задание появится в папке menu:Мои задания[Входящие].
+
* Если данный исполнитель последний, действия полностью аналогичны _параллельному_ способу маршрутизации.

[#by-responsible]
== Завершение заданий ответственным исполнителем

Пользователь, назначенный _Ответственным исполнителем_, может завершить задание любого из остальных исполнителей данной _Группы заданий_.

.Чтобы завершить задания:
. xref:tasks/receive-responsible.adoc[Получите] задания исполнителей.
. Откройте полученную карточку _Задание УД_ любого из исполнителей.
+
Если _Ответственный исполнитель_ открывает задание, в котором он сам назначен исполнителем, в карточке будет доступна кнопка *Завершить*.
+
.Карточка задания "Ответственного исполнителя"
image::task-card-responsible.png[Карточка задания "Ответственного исполнителя"]
+
Если _Ответственный исполнитель_ открывает задание другого исполнителя, в карточке в состоянии `Не начато` будет доступна кнопка *Прекратить*. После взятия задания в работу в карточке станет доступна кнопка *Завершить*.
+
.Карточка задания другого исполнителя, открытая Ответственным исполнителем
image::open-responsible.png[Карточка задания другого исполнителя, открытая Ответственным исполнителем]
+
. Выполните необходимое действие:
+
* Если состояние задания `Не начато`, нажмите на кнопку *Прекратить*.
* Если состояние задания `В работе`, нажмите на кнопку *Завершить*.
+
У _Автора_ группы заданий карточка будет перемещена в папку menu:Мои задания[Исходящие > Завершено]. У _Ответственного исполнителя_ карточка исчезнет.

[#automatic]
== Автоматическое завершение группы заданий

.Завершение группового задания происходит автоматически:
* В случае *_параллельного_* способа маршрутизации -- после завершения заданий всеми исполнителями.
* В случае *_последовательного_* способа маршрутизации -- после завершения задания последним исполнителем из очереди.

После завершения группы заданий _Автору_ карточки на электронный почтовый ящик может быть отправлено уведомительное письмо следующего содержания: `В системе {dv} была завершена группа заданий "Название", автором которой Вы являетесь. Для того, чтобы ознакомиться с результатами, перейдите по ссылке. Будет открыта карточка группы заданий "Название"`.

[#force]
== Принудительное завершение группы заданий

Принудительное завершение возможно после завершения или отзыва всех незавершенных заданий.

Принудительно завершить экземпляры группового задания могут _Автор_ карточки _Группа заданий УД_, _Ответственный исполнитель_ или _Контролёр_ (если он был назначен).

.Чтобы принудительно завершить экземпляры группы заданий:
. Откройте карточку вида _Документ УД_, из которой была создана связанная карточка вида _Группа заданий УД_.
. Перейдите на вкладку _Задания_.
. Найдите связанную карточку _Группа заданий УД_.
+
image::group-linked-doc.png[Отображение связанной карточки группового задания в карточке Документ УД]
+
. Откройте карточку, для этого дважды щелкните левой клавишей мыши на элементе схемы.
+
Будет открыта карточка _Группа заданий УД_.
+
. Перейдите на вкладку _Задания_.
+
На данной вкладке будет отображен список заданий, сформированных при помощи карточки _Группа заданий УД_.
+
.Отображение списка связанных заданий
image::group-linked-tasks.png[Отображение списка связанных заданий]
+
. Откройте первое задание.
. Нажмите на кнопку _Отозвать_.
+
После отзыва последнего задания бизнес-процесс сменит состояние карточки _Группы заданий УД_.
