= Редактирование прикреплённых файлов

Файлы, прикреплённые к документу, могут редактироваться при работе с карточками _Документ_ как в системе {dv}, так и вне {dv}, после выгрузки файла из системы.

[#inside-dv]
== Работа с файлом в системе {dv}

При работе с карточкой _Документ_ возможен просмотр и редактирование прикреплённых к ней файлов. По умолчанию редактирование документа допускается только в состоянии `Подготовка`.

Для просмотра файла выделите его имя в списке файлов. Содержимое файла будет отображено в области предварительного просмотра.

.Карточка Документ УД -- Входящий с открытым для просмотра файлом
image::register-in.png[Карточка Документ УД -- Входящий с открытым для просмотра файлом]

Для редактирования файла нажмите кнопку *Открыть файл* на ленте карточки или дважды щёлкните по названию файла в списке. Файл открывается в приложении, предназначенном для открытия файлов данного типа.

На время редактирования файл автоматически блокируется и становится недоступным для других пользователей.

После редактирования и сохранения изменённого файла блокировка файла снимается. Если файл был изменён, то после закрытия приложения, в котором выполнялось редактирование файла, автоматически Создаётся новая версия файла (по умолчанию станет текущей), а если версионирование файлов отключено, файл перезаписывается.

[#outside-dv]
== Работа с файлом вне системы {dv}

При разработке текста документа можно выгрузить файл из системы _{dv}_ для корректировки, а затем загрузить его обратно в систему. На время такой корректировки файл становится недоступен для редактирования другими пользователями.

Операция доступна при работе с документами в состоянии `Подготовка`.

.Чтобы выполнить действия с файлом вне системы {dv}:
. Выделите нужный файл в карточке _Документ_ в области отображения списка прикреплённых файлов.
. В контекстном меню файла выберите пункт _Заблокировать для работы_.
+
NOTE: Для xref:scenarios/encryption.adoc[зашифрованных] файлов блокирование запрещено.
+
. В открывшемся диалоговом окне выберите (или создайте новую) папку для размещения файла.
. Выполните необходимую обработку файла с помощью внешнего приложения (например, Microsoft Word).
. По окончании работы отмените блокировку файла или верните файл с блокировки, выбрав в контекстном меню пункт _Отменить блокировку_ или _Вернуть с блокировки_ соответственно.
+
Пункт меню _Вернуть с блокировки_ применим в том случае, если заблокированный файл был изменён.
+
В результате в систему будет загружена новая версия файла, которая станет текущей.
